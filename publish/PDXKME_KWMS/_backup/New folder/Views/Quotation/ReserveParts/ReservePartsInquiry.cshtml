@*
  Created by rMehmood @Nov 25, 2020
  This is Reserve Parts Inquiry screen

*@

@Scripts.Render("~/bundles/InquiryJSBundle")
@Styles.Render("~/Content/InquiryCSSBundle")


<style type="text/css">   
.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset { text-align: center; float: none !important;}  
.accordianRows{height: 80px !important;    min-height: 80px;}
.legColumn label{color: #0066ff !important;font-size: 11px;font-weight: bold;} 
.modal-sm { width: 369px;} 
#ConfirmModalBody{ padding: 7px 3px 9px 4px !important;  }   
.QuotationNo{width:44% !important}
.QuotationSubNo{width:30% !important}  
.panel-body  { padding-top:4px !important;}    
.pagination > li > a, .pagination > li > span {   font-size: 12px !important;  }  
.gridActionButtons  {margin: -1px -6px 0 0 !important; } 
.downlodMargin{margin-left:202px;}

.clsActions>td{ text-align:left !important; } 
.table tr td {padding:5px !important;   }  
.Inlinebtn{width:80px !important;  } 
.ui-datepicker{z-index: 99 !important;} 
.btn-group, .btn-group-vertical {    position: relative;    display: inline-block;    vertical-align: middle;    width: 75% !important;}  
.dropdown-menu>.active>a,.dropdown-menu>.active>a:focus,.dropdown-menu>.active>a:hover{background-color:white;color:#fff;outline:0none;text-decoration:none;} 
.btn.caret{margin-left:0px;} 
.highlight { background-color: red; }  
/*row hover effect on other than selected row */
#UserInquiryId tr:not(.highlight):hover { background-color:#F0F0F0  !important;} 
.calendarPicker{background-position: right center; background-repeat: no-repeat;  background-image:url('../Images/calendar.png');  } 
#UserInquiryId tr>td:hover(:empty) {cursor: pointer;} 
#UserInquiryId  tr td:moz-only-whitespace{  cursor:pointer; } 
.selected {  background-color:#fac902 !important;  }     
.table{ margin:0 !important;} 
.centerAlign{ text-align:center !important}

.btn.disabled.multiselect {opacity: 1.0 !important; border: 1px solid gray;} 
.btn-group {cursor:no-drop;} 

#btnDownload{ width:100px  !important}
.ddlFile
{ 
    height: 30px ! important; 
    width: 90px;
    margin-top:5px;
 }

 @@media screen and (max-width: 767px) 
  {
      .marginAtXs{margin-top:10px;}
      .downlodMargin{margin-left:15px}
     button.multiselect 
        {
           background-color: White !important; border-radius: 1px; color: White; font-family: sans-serif,open sans;
           font-size: 13px !important; font-weight: 600 !important; height: 26px !important; padding: 4px 12px; text-decoration: none;  
           border-radius: 6px; width:97% !important;            
        }
        
 #btnDownload { width: 100%  !important;}
 .DropDownButtonContainer{width:100%;  margin-top:5px;}
.bootstrap-filestyle{  margin: 0;    }
.DropDownButtonContainer button { width:94% !important; }

.QuotationNo{width:66% !important}
.QuotationSubNo{width:30% !important}
.btn-group, .btn-group-vertical{position: relative; display: inline-block; vertical-align: middle;width: 100% !important;}  
.InputElements{ background-color: White !important; border: 1px solid grey !important; height: 25px !important; width: 97%;}  
div#xyz{ margin-left:0px !important;  }  
input,select { width:auto;  }    
br { display:  none; }
.TopMarginAtXs     {      margin-top:5px;       width:100% !important;   }  
   
} /* media 767 end*/
@@media screen and (max-width: 459px) 
{
     .QuotationSubNo{width:30% !important}
}
 #UserInquiryId thead tr th{ text-align:left }
 .table-striped thead tr th a {
    margin-left: -2px !important;
}
 </style>
<style>

    .header_QuotationNo{text-align:right !important;}
    .header_QuotationaSubNo{text-align:right !important;}
    .header_SaleOrderNO{text-align:right !important;}
    .header_PriceAmount{text-align:right !important;}
    .header_RequestedQuantity{text-align:right !important;}
    .header_AcceptedQuantity{text-align:right !important;}
    .header_ReserveQuantity{text-align:right !important;}
    .a_QuotationNo{margin-right: 4px;}

   
 </style>
<div class="container childcontent ">
    <div class="panel panelInquiryControls panel-primary panelWidth">
        <div class="panel-heading PanelTitle">
            <h3 class="panel-title pull-left ">
                @Resources.Resource.ReservePartsInquiry</h3>
        </div>
        <div class="panel-body">
            <div class="row" style="margin: 2px 0px 10px -14px ! important;">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button class=" btn  TopMarginAtXs" id="btnSearch">@Resources.Resource.btnSearch</button>
                  
                    <button type="button" class="btn btn-secondary dropdown-toggle marginAtXs" id="btnDownload"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        @Resources.Resource.btnDownload<span class="caret"></span>
                    </button>
                    <div class="dropdown-menu DownLoadDropDown downlodMargin">
                        <a class="dropdown-item" href="#" onclick="DownloadFile('0')">CSV</a> <a class="dropdown-item"
                            href="#" onclick="DownloadFile('1')">XLS</a>
                    </div>
                </div>
            </div>
            <div class="FormElements">
                <div class="row">
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                        <div class="editor-field SizeOnXs">
                            @Html.Label(@Resources.Resource.lblQuotationNo)
                        </div>
                        <div class="editor-label SizeOnXs">
                            @Html.TextBox("txtQuotationNumber", null, new { @class = "form-control InputElements QuotationNo", style = "display: inline; " })
                            @Html.TextBox("txtQuotationSubNo", null, new { @class = "form-control InputElements  QuotationSubNo", style = "display: inline; " })
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                        <div class="editor-label SizeOnXs">
                            @Html.Label(@Resources.Resource.lblDistributorCode)
                        </div>
                        <div class="editor-field SizeOnXs">
                            @Html.DropDownList("ddlDistributerCode", ViewData["DCodes"] as List<SelectListItem>, new { @class = " form-control InputElements chosenddl", multiple = "multiple", id = "ddlDistributerCode" })
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                        <div class="editor-label SizeOnXs">
                            @Html.Label(@Resources.Resource.lblCustomerCode)
                        </div>
                        <div class="editor-field SizeOnXs">
                            @Html.DropDownList("ddlCustomerCodes", ViewData["CustCodes"] as List<SelectListItem>, new { @class = " form-control InputElements chosenddl", multiple = "multiple", id = "ddlCustomerCodes" })
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                        <div class="editor-field SizeOnXs ">
                            @Html.Label(@Resources.Resource.lblDistributerOrderNo)
                        </div>
                        <div class="editor-field SizeOnXs ">
                            @Html.TextBox("txtDBOrder", null, new { @class = "form-control InputElements" })
                        </div>
                    </div>
                </div>
                @*row end*@
                <div class="row">
               @*     <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                        <div class="editor-label SizeOnXs">
                            @Html.Label(@Resources.Resource.lblSaleOrderNo)
                        </div>
                        <div class="editor-field SizeOnXs ">
                            @Html.TextBox("txtSalesOrderNo", null, new { @class = "form-control InputElements" })
                        </div>
                    </div>*@
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                        <div class="editor-label SizeOnXs">
                            @Html.Label(@Resources.Resource.lblStatus)
                        </div>
                        <div class="editor-field SizeOnXs ">
                            @Html.DropDownList("ddlStatus", ViewData["StatusCodes"] as List<SelectListItem>, new { @class = "form-control InputElements" })
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                        <div class="editor-label SizeOnXs">
                            @Html.Label(@Resources.Resource.lblCreationDateFrom)
                        </div>
                        <div class="editor-field SizeOnXs ">
                            @Html.TextBox("txtCDateF", null, new { @class = " calendarPicker form-control InputElements", @style = " background-color:White !important;" })
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                        <div class="editor-label SizeOnXs">
                            @Html.Label(@Resources.Resource.lblCreationDateTo)
                        </div>
                        <div class="editor-field SizeOnXs ">
                            @Html.TextBox("txtCDateT", null, new { @class = " calendarPicker form-control InputElements", @style = " background-color:White !important;" })
                        </div>
                    </div>
                     <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
                        <div class="editor-label SizeOnXs">
                            @Html.Label(@Resources.Resource.lblPersonIncharge)
                        </div>
                        <div class="editor-field SizeOnXs ">
                            @if (PDXWEB.BusinessModels.Common.UserRights.hasRight("A01S010_01_008"))
                            {
                                @Html.TextBox("txtPersonIncharge", null, new { @class = "form-control InputElements", id = "txtPersonIncharge" })
                            }
                            else
                            {
                                @Html.TextBox("txtPersonIncharge", Session["UserID"], new { @class = "form-control InputElements", id = "txtPersonIncharge", disabled = "disabled" })
                            }
                        </div>
                    </div>
                </div>
               
            </div>
        </div>
    </div>
</div>
<div class="container childcontent " style="padding-top: 0px ! important;">
    <div class="panel panelInquiryControls panel-primary panelWidth">
        <div id="LoadingImage" style="display: none; text-align: center">
        </div>
        <div id="divToUpdate" style="height: 380px;">
        </div>      
    </div>
</div>
<div class="container childcontent " style="padding-top: 0px ! important;">
    <div class="panel panelInquiryControls panel-primary panelWidth">
    </div>
</div>
<div class="modals">
    <!-- Modal -->
    <div class="modal fade" id="MessageModal" role="dialog" style="padding-top: 169px;">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"> &times;</button>
                    <h4 class="modal-title">  @Resources.Resource.ReservePartsInquiry</h4>
                </div>
                <div class="modal-body" id="modalBody">
                    <img class="imgError" />
                    <label id="lblMessageText" class="lblError"> </label>
                </div>
                <div class="modal-footer">
                    <button style="text-align: center; float: none !important;" id="btnOk" class="btn btn-default center-block" data-dismiss="modal"> @Resources.Resource.btnOK</button>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function () {  
    
    var txtErrorType;
    var txtError;
      /*Adding class to pagination*/
      $('.NewPaging ul').addClass("pagination");   
    
    /*reading date fromat from session  */
     var dateFormat="@Session["DateCulture"].ToString()";  
     if(dateFormat==null || dateFormat=="")
      {
        /*Dfault date format*/
       dateFormat="mm/dd/yy"
      }
      /*Initializing datepicker controls with specified dateformat*/
     InitializeCalander(dateFormat);
    
    /*Removing style attribute from legends*/
      $(".lagends").removeAttr("style");
      
      /*Initializing accordian*/
       $(".accordion").accordion({
                          collapsible: true,
                          active: false
              });
/*Disable download button*/
  $("#btnDownload").attr("disabled", "disabled");
  /*Initialize multiselect on distributor Code dropdown*/
  $('#ddlDistributerCode').multiselect();
  /*Initialize multiselect on Customer Code dropdown*/
    $('#ddlCustomerCodes').multiselect(
        {
            buttonText: function (options) {
                if (options.length == 0) {
                    return "None selected";
                }
                else {
                    var selected = 0;
                    options.each(function () {
                        selected += 1;
                    });
                    return selected + ' Selected ';
                }

            }
        });
        /*Set css of multiselect*/
        $(".multiselect-container").css("height", "100px !important")
        $(".multiselect").attr('size', '3');

     /*Trigger search*/
     InstantiateSearchClickEvent();
        
   });// doc.ready end
   
</script>

@*This Code Checks For Current User and sets his Distributor Code Checked*@
@if (Session["CustId"] != null && Session["ReservePartsInquirySearchParams"] == null && !string.IsNullOrEmpty(Session["CustId"].ToString()))
{
    <script type="text/javascript">
    $(document).ready(function () {
             var currentDB  = "@Session["CustId"].ToString()"; 
             $("#ddlDistributerCode").multiselect().find(":checkbox[value='" + currentDB + "']").attr("checked", "checked");
             $("#ddlDistributerCode option[value='" + currentDB + "']").attr("selected", 1);
             $("#ddlDistributerCode").multiselect("refresh");
         })
    </script>
          
}

@*This script block contains code to get customer codes based on distributors*@
<script type="text/javascript">    
   /*distributor Code change event*/
    $("#ddlDistributerCode").on("change", function(){
        GetCustomerCodes();
    });

    /*function to get customer codes for selected distributors */
    function GetCustomerCodes()
    {
        $("#ddlCustomerCodes option:selected").removeAttr("selected");
        $("#ddlCustomerCodes").multiselect("refresh");        
        var tempDistributors = $("#ddlDistributerCode").val();
        if(tempDistributors==null)
        {
           return;
        }

        var DbCodes = tempDistributors.join();
        var params = {Distributors: DbCodes};            
        $.post("@Url.Action("GetDistributorCustomerCodes", "Inquiry", null)",params,function(result)
        {
             if(CheckForSessionExpiry(result))
             {
                 SessionExpiredRedirect();
                 return;
             }
    
               result.forEach(function(cust_code)
               {    
                   $("#ddlCustomerCodes").find("option[value='"+cust_code.CustomerCode+"']").prop("selected", "selected");
                   $("#ddlCustomerCodes").multiselect("refresh");
              
               });          
        });        
    }
    
</script>

@*This script block contains search code*@
<script type="text/javascript">

    function InstantiateSearchClickEvent(fromHistory)    
    {    

        $("#btnSearch").off("click");       
     
        $("#btnSearch").on("click",function (event) {          
            //cond: only Date To is specified
            if($('#txtCDateT').val() != "" && $('#txtCDateF').val() == ""){
                //txtError="Please Specify Date From";
                txtError="@Resources.Resource.MsgInfo5";
                txtErrorType="0";
                DisplayModal(txtErrorType,txtError) ; 
                return false;
            }

            var dateTimeFrom = new Date($("#txtCDateF").datepicker("getDate"));
            var dateTimeTo   = new Date($("#txtCDateT").datepicker("getDate"));
           
            if($('#txtCDateT').val() != ""){
                                 
                    if(dateTimeFrom > dateTimeTo){
                    //txtError="From date can not be greater than To date.";
                    txtError="@Resources.Resource.MsgInfo6";
                    txtErrorType="0";
                    DisplayModal(txtErrorType,txtError) ;    
                        return false;
                    }
            }

            var listValO = new Array();
            $("#ddlDistributerCode option:selected").each(function()
            {
                var idOption = $(this).val();     
                listValO.push(idOption);      
            });   
            var lstDbCode = listValO.join();
            
            
            //hst001 Start
            var listValC = new Array();
            $("#ddlCustomerCodes option:selected").each(function(){
                var idOption = $(this).val();
                listValC.push(idOption);
            });
            var lstCustCode = listValC.join();
            //hst001 End

            $("#divLoading").remove();
            $("#divToUpdate").parent("div").prepend("<div id='divLoading'></div>");
   var params={};
    if(fromHistory!=null && fromHistory==true)
    {
            $("div#divLoading").addClass('show');
                params = { 
                            pQUTN: $("#txtQuotationNumber").val(), 
                            pQUTO: $("#txtQuotationSubNo").val(),
                            pDBCode:lstDbCode, 
                            pCustCode: lstCustCode, //hst001
                            pDBOrder: $("#txtDBOrder").val(),
                           // pSalesOrder:$("#txtSalesOrderNo").val(), 
                            pStatus: $("#ddlStatus").val(),
                            pPICH:$("#txtPersonIncharge").val(), 
                            pDateF:$("#txtCDateF").val(), 
                            pDateT:$("#txtCDateT").val(),                           
                            getHistory:true
                         }; 
    }
    else
    {
            params = {     pQUTN: $("#txtQuotationNumber").val(), 
                            pQUTO: $("#txtQuotationSubNo").val(),
                            pDBCode:lstDbCode, 
                            pCustCode: lstCustCode, //hst001
                            pDBOrder: $("#txtDBOrder").val(),
                           // pSalesOrder:$("#txtSalesOrderNo").val(), 
                            pStatus: $("#ddlStatus").val(),
                            pPICH:$("#txtPersonIncharge").val(), 
                            pDateF:$("#txtCDateF").val(), 
                            pDateT:$("#txtCDateT").val()
                         }; 
    
    }

        /*disbaled download button when searched is triggered*/
        $("#btnDownload").attr("disabled", "disabled");
            $.ajax(
                {
                    cache: false,
                    type: "POST",
                    url: "@Url.Action("SearchReservePartsData", "ReservePartsInquiry", null)",
                    //data: valuee,
                    data: params,
                    success: function (data) { 

                        if(CheckForSessionExpiry(data))
                        {                              
                            SessionExpiredRedirect();
                            return;
                        }                                                                                                        
                        deleteCheck=0;
                        $(".hideonLoad").show();                     
                        var data=data.replace("$(containerId).parent().delegate","$(containerId).parent().undelegate();$(containerId).parent().delegate ");                     
                        var data=data.replace("$(containerId).swhgLoad($(this).attr('href'), containerId, callback);"," if( !($(this).parent('li').hasClass('disabled')) ) { $(containerId).swhgLoad($(this).attr('href'), containerId, callback);}");
                        $("#divToUpdate").html(data);
                        // Unbind();//hst107
                        $('.NewPaging ul').addClass("pagination");
                      
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                                        
                         deleteCheck=0;                              
                        //txtError="Failed to retrieve data.";
                        txtError="@Resources.Resource.MsgInfo3";
                        txtErrorType="0";
                        DisplayModal(txtErrorType,txtError) ;                   
                    }
                }); // ajax end 
        }); // btnSearch.click end    
    }//InstantiateSearchClickEvent end

   

</script>
<script type="text/javascript">

  $(".infoContainer").hide();
    $(".kowaTemp").show();
    var fromHistory = false;
     /*Disabling distributor Code dropdown for specific role*/
    var CurrentUserRole = @Session["Role"].ToString(); 
    if(CurrentUserRole=="3")
    {
          $("#ddlDistributerCode").attr("disabled", true);          
    }

    $(document).on("mouseover", "#UserInquiryId tr", function () {
        if ($(this).attr("class") == "clsActions") {
            $(this).removeClass(".gridTable tr:hover");
        }
    });

    $(document).on('click', '#btnOk', function () {
        $("#MessageModal").modal('hide');

    }); 

     function afterLoad() 
    {
       $(".gridHead th a").each(function(){
           $(this).addClass( "a_"+ $(this).attr("href").split("sort=")[1].split("&")[0]) ;
         $(this).parent("th").addClass( "header_"+ $(this).attr("href").split("sort=")[1].split("&")[0]) ;
         });      
        setArrowImages();
        $('.NewPaging ul').addClass("pagination");

    }//afterLoad end

    function showProgress() {
        if (!spinnerVisible) {
            $("#spinner").fadeIn("fast");
            spinnerVisible = true;
        }
    };

    function hideProgress() {
        if (spinnerVisible) {
            var spinner = $("#spinner");
            spinner.stop();
            spinner.fadeOut("fast");
            spinnerVisible = false;
        }
    };


  

          function isRealValue(obj) {
            return obj && obj !== "null" && obj !== "undefined";
        }

      function setArrowImages() {

          var dir = $('#dir').val();
          var col = $('#col').val();
          var header = $('th a[href*=' + col + ']');

          if (dir == 'Ascending') {
              header.text(header.text() + ' ▲');
          }
          if (dir == 'Descending') {
              header.text(header.text() + ' ▼');
          }
      } 

    function isNullOrEmpty(value)
    {
        if(value==null || value=="")
         {      
          return true
        }
      else
      {
         return false;      
      }

 } //isNullOrEmpty end


 function isArrayContainEmptyOrNull(Array_To_Evaluate)
 {
      var emptyOrNullCounter=0;
      for(var i=0;i<Array_To_Evaluate.length;i++)
      {
        if(Array_To_Evaluate[i] == "" ||  Array_To_Evaluate[i] ==null)   
          {
           emptyOrNullCounter+=1          
          }
      }

       if (emptyOrNullCounter != 0) 
          {
           return true;
           }
       else {
           return false;
           }

   } //isArrayContainEmptyOrNull end


</script>

@*Load from history start*@
@if (Session["ReservePartsInquirySearchParams"] != null && Session["RecordCount"] != null && Session["RecordCount"].ToString() != "0")
{
    var objParams = Session["ReservePartsInquirySearchParams"] as PDXWEB.Models.Quotation.ReserveParts.SearchParamsReserveParts;
    <script type="text/javascript">
                 fromHistory=true;
                InstantiateSearchClickEvent(true);
                   var parametersArray=new Array();
                    var fieldsCounter=0;
 
                    var quotationNo = "@objParams.pQUTN";
                    var revisionNo = "@objParams.pQUTO";
                    var customerCode = "@objParams.pDBCode";
                    var CustCodes = "@objParams.pCustCode";
                    var customerOrderNo = "@objParams.pDBOrder";
                    var status = "@objParams.pStatus";
                    var personIncharge = "@objParams.pPICH";
                    var dateFrom=  "@objParams.pDateF";
                    var dateTo=   "@objParams.pDateT";
                    if(!isNullOrEmpty(quotationNo))
                    {
                      $("#txtQuotationNumber").val(quotationNo)
                      fieldsCounter+=1;
                    }
                    if(!isNullOrEmpty(customerCode))
                    {
                    
                    var DbValues=customerCode.split(",");                  
                    i = 0, size = DbValues.length;
                    for(i; i < size; i++){
                      $("#ddlDistributerCode").multiselect().find(":checkbox[value='"+DbValues[i]+"']").attr("checked","checked");
                      $("#ddlDistributerCode option[value='" + DbValues[i] + "']").attr("selected", 1);
                      $("#ddlDistributerCode").multiselect("refresh");
                    } 
                     fieldsCounter+=1;
                    }
                    
                    if(!isNullOrEmpty(CustCodes))
                    {
                        var DbValues=CustCodes.split(",");                  
                        i = 0, size = DbValues.length;
                        for(i; i < size; i++){
                        $("#ddlCustomerCodes").multiselect().find(":checkbox[value='"+DbValues[i]+"']").attr("checked","checked");
                        $("#ddlCustomerCodes option[value='" + DbValues[i] + "']").attr("selected", 1);
                        $("#ddlCustomerCodes").multiselect("refresh");
                        } 
                        fieldsCounter+=1;
                    }
                  
                    if(!isNullOrEmpty(customerOrderNo))
                    {

                    $("#txtDBOrder").val(customerOrderNo)
                      fieldsCounter+=1;
                  }

                    if(!isNullOrEmpty(personIncharge))
                    {
                    $("#txtPersonIncharge").val(personIncharge)
                     fieldsCounter+=1;
                    }
                    if(!isNullOrEmpty(status))
                    {
                    $("#ddlStatus").val(status)
                     fieldsCounter+=1;
                    }
                    if(!isNullOrEmpty(dateFrom))
                    {
                    $("#txtCDateF").val(dateFrom)
                     fieldsCounter+=1;
                    }
                    if(!isNullOrEmpty(dateTo))
                    {
                    $("#txtCDateT").val(dateTo)
                      fieldsCounter+=1;
                    }
    
                 $("#btnSearch").trigger("click");
                      
    </script>
}
@*Load from history end*@

@*Validation on Input*@
<script type="text/javascript">
   
    function toValidDate(datestring) {
        return datestring.replace(/(\d{2})(\/)(\d{2})/, "$3$2$1");
    } 
        $(".QuotationNo").keypress(function (event) {
            //To avoid alphabet in textbox
            var key = event.which;
            if (!(key >= 48 && key <= 57)) {
                if (key != 8 && key != 16) {
                    event.preventDefault();
                }
            }
            //To implement length restriction on numeric
            if (this.value.length >= 10 && key != 8 && key != 13 && key != 16) {
                return false;
            }
        })

        $("#txtQuotationSubNo").keypress(function (event) {
            //To avoid alphabet in textbox
            var key = event.which;
            if (!(key >= 48 && key <= 57)) {
                if (key != 8 && key != 16) {
                    event.preventDefault();
                }
            }
            //To implement length restriction on numeric
            if (this.value.length >= 2 && key != 8 && key != 13 && key != 16) {
                return false;
            }
        })

        $(".QuotationNo").on("paste", function (event) {
            var element = this;
            setTimeout(function () {
                if (!$.isNumeric($(".QuotationNo").val().trim())) {
                    $(".QuotationNo").val(""); false;
                }
                else {
                    var text = $(element).val();
                    if (text.length >= 10) {
                        $(element).val(text.substr(0, 10));
                    }
                }
            }, 100);
        }); //numeric only end



        $('#txtDBOrder').keypress(function (event) {
            var key = event.which;
            if (this.value.length >= 20 && key != 8 && key != 13) {
                return false;
            }
        });

        $('#txtPersonIncharge').keypress(function (event) {
            var key = event.which;
            if (this.value.length >= 10 && key != 8 && key != 13) {
                return false;
            }

        });

        $("#txtPersonIncharge").on("paste", function (event) {
            var element = this; setTimeout(function () {
                var text = $(element).val(); if (text.length >= 10) {
                    $(element).val(text.substr(0, 10));
                }
            }, 100);
        }); //numeric only end


  
</script>


<script type="text/javascript">
 
 function DownloadFile(fileFormat) 
{
           var postData={txtFileFormate:fileFormat};

         $.post("@Url.Action("DownloadFile", "ReservePartsInquiry", null)",postData,function (data) {
            
             if (CheckForSessionExpiry(data)) 
                {
                    SessionExpiredRedirect();
                    return;
                 }
             if(isRealValue(data.ErrorOccured))
             {
                 txtError = data.ErrorMessage;
                 txtErrorType = "0";
                 DisplayModal(txtErrorType, txtError);  
             }
             else
             {
              
               txtError = data.ErrorMessage;
               txtErrorType = "1";
               DisplayModal(txtErrorType, txtError);           
              window.location.href=data.RedirectToUrl;
             }
            

            }); /// ajax end 
}
 
</script>
